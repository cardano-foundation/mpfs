<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-intro" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Introduction to MPFS | MPFS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://cardano-foundation.github.io/mpfs/img/anti-cli-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://cardano-foundation.github.io/mpfs/img/anti-cli-social-card.jpg"><meta data-rh="true" property="og:url" content="https://cardano-foundation.github.io/mpfs/docs/intro"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Introduction to MPFS | MPFS"><meta data-rh="true" name="description" content="Merkle Patricia Forestry"><meta data-rh="true" property="og:description" content="Merkle Patricia Forestry"><link data-rh="true" rel="icon" href="/mpfs/img/cardano-ada-logo.svg"><link data-rh="true" rel="canonical" href="https://cardano-foundation.github.io/mpfs/docs/intro"><link data-rh="true" rel="alternate" href="https://cardano-foundation.github.io/mpfs/docs/intro" hreflang="en"><link data-rh="true" rel="alternate" href="https://cardano-foundation.github.io/mpfs/docs/intro" hreflang="x-default"><link rel="stylesheet" href="/mpfs/assets/css/styles.8806e0c1.css">
<script src="/mpfs/assets/js/runtime~main.85c3884e.js" defer="defer"></script>
<script src="/mpfs/assets/js/main.a144596b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/mpfs/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mpfs/"><div class="navbar__logo"><img src="/mpfs/img/logo.svg" alt="Cardano Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/mpfs/img/logo.svg" alt="Cardano Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">MPFS</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/mpfs/docs/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/cardano-foundation/mpfs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/mpfs/docs/intro">Introduction to MPFS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mpfs/docs/architecture">System architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mpfs/docs/manual/signingless">User Manual</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/mpfs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Introduction to MPFS</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Introduction to MPFS</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="merkle-patricia-forestry">Merkle Patricia Forestry<a href="#merkle-patricia-forestry" class="hash-link" aria-label="Direct link to Merkle Patricia Forestry" title="Direct link to Merkle Patricia Forestry">â€‹</a></h2>
<p>A Merkle Patricia Forestry (MPF) is a data structure that allows storing key-value pairs (facts) in a verifiable and immutable way on the a blockchain.
For a primer on MPF, see <a href="https://cardanofoundation.org/blog/merkle-patricia-tries-deep-dive" target="_blank" rel="noopener noreferrer">CF Presentation</a>.</p>
<p>Storing facts inside an MPF provides cryptographic proofs of inclusion and exclusion for each fact, allowing anyone to verify the integrity of the data. When an MPF is available inside a UTxO on the Cardano blockchain i.e., transactions can refer to it as input to pass smart contract validation.</p>
<p>How to provide and access MPF&#x27;s facts and how to publish the MPF root is left to be decided.
MPFS takes some decisions to provide a complete solution to manage MPF tokens on Cardano.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="design-choices-to-run-mpf-on-cardano">Design choices to run MPF on Cardano<a href="#design-choices-to-run-mpf-on-cardano" class="hash-link" aria-label="Direct link to Design choices to run MPF on Cardano" title="Direct link to Design choices to run MPF on Cardano">â€‹</a></h3>
<ul>
<li>All modifications to an MPF root have to appear on-chain. This gives anyone with access to the blockchain history the ability to reconstruct the full history of changes and so the current facts.</li>
<li>All modifications must be consumed under a smart contract validation. This eliminates the burden to prove that an MPF contains only facts that are the result of modifications that have been on chain.</li>
<li>MPF are owned. This gives the smart contract the ability to operate on multiple MPF tokens, each controlled by a different user. Products of MPF roots and owners are referred to as MPF tokens from now on.</li>
<li>MPF token can be modified only by their owner. This gives full control to the owner on which facts are part of the MPF token. The owner of an MPF token is referred to as <code>oracle</code> from now on.</li>
<li>MPF tokens have a unique identifier. This gives the ability to address a specific MPF token inside a modification.</li>
<li>Specific MPF modifications are owned. This gives the modification requester the ability to retract modifications if they are not accepted by the owner. The owner of a modification request is referred to as <code>requester</code> from now on.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mpfs-the-service">MPFS: the service<a href="#mpfs-the-service" class="hash-link" aria-label="Direct link to MPFS: the service" title="Direct link to MPFS: the service">â€‹</a></h2>
<p><em>MPFS</em> is an http service wrapping</p>
<ul>
<li>MPF operations from the <a href="https://github.com/aiken-lang/merkle-patricia-forestry" target="_blank" rel="noopener noreferrer">Merkle Patricia Forestry library</a> in one smart contract to track and validate each MPF history of changes</li>
<li>an off-chain transaction builder that helps building transactions to interact with the smart contract</li>
<li>an indexer over the smart contract events to reconstruct and serve the MPF state</li>
</ul>
<p>It is designed to be used by anyone who wants to store and manage knowledge in a decentralized manner, allowing contributors to add or remove facts while ensuring the integrity and history of the knowledge database.</p>
<p>It is particularly useful for applications that require a verifiable and immutable record of knowledge, such as decentralized applications (dApps), knowledge management systems, and collaborative platforms.</p>
<p>The service comes in 2 flavors signingful and signingless. The signingful version is suitable for local installations where it controls a private key for the user, while the signingless version is suitable for remote installations where the user has to provide a signature for each transaction. This introduction focuses on the signingless version, which is the one used in production in some projects.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-requisites">Pre-requisites<a href="#pre-requisites" class="hash-link" aria-label="Direct link to Pre-requisites" title="Direct link to Pre-requisites">â€‹</a></h2>
<p>Being an HTTP service no particular skill is required to use it, but some knowledge of Cardano transactions and smart contracts is useful to understand how to interact with it.</p>
<p>Deployment has some external requirements:</p>
<ol>
<li><a href="https://github.com/bloxbean/yaci-store" target="_blank" rel="noopener noreferrer">Yaci store</a>. This is required to provide address to utxo mapping. When building transactions the user will provide an address that he controls and wants to spend from. The service will use the Yaci store to find the UTxOs that are associated with that address and build the transaction accordingly.</li>
<li><a href="https://github.com/cardanoSolutions/ogmios" target="_blank" rel="noopener noreferrer">Ogmios</a>. This is required to track the events involving the system address.</li>
<li><a href="https://github.com/intersectMBO/cardano-node" target="_blank" rel="noopener noreferrer">Cardano node</a>. This is indirectly required by both Yaci store and Ogmios.</li>
</ol>
<p>The mpfs service in itself is a typescript application so any nodejs supported platform should be able to run it. It is tested on Linux and MacOS, but it should work on Windows as well.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting started" title="Direct link to Getting started">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker">Docker<a href="#docker" class="hash-link" aria-label="Direct link to Docker" title="Direct link to Docker">â€‹</a></h3>
<p>The image is available on ghcr.io and can be pulled with the command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull ghcr.io/cardano-foundation/mpfs/mpfs:v1.1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is an expample of a working deployment: <a href="https://github.com/cardano-foundation/hal/blob/main/docs/deployment/mpfs/docker-compose.yml" target="_blank" rel="noopener noreferrer">mpfs in CF</a>
Consider sourcing <a href="https://github.com/cardano-foundation/hal/blob/main/docs/deployment/mpfs/bootstrap.sh" target="_blank" rel="noopener noreferrer">bootstrap.sh</a> as mentioned in <a href="https://github.com/cardano-foundation/hal/blob/main/docs/deployment/mpfs/README.md" target="_blank" rel="noopener noreferrer">setup instructions</a> to speedup the node syncing.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="source">Source<a href="#source" class="hash-link" aria-label="Direct link to Source" title="Direct link to Source">â€‹</a></h3>
<p>Altenatively, you can run the service from source. To do so, you need to have nodejs and npm and installed on your system. Then you can clone the repository and run the following commands:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/cardano-foundation/mpfs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd off_chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npx tsx src/service/signingless/main.ts --port 3000 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --provider yaci --yaci-store-host http://localhost:8080 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --ogmios-host http://localhost:1337 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --database-path ./mpfs.db \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --since-slot 94898393 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --since-block-id ef94934f8eb129ebf07eeaab007b81ecb1bc58b121d19ac0ffe81f928bf56cc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will start the service on port 3000, using the Yaci store running on <a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">http://localhost:8080</a> and the Ogmios server running on <a href="http://localhost:1337" target="_blank" rel="noopener noreferrer">http://localhost:1337</a>. The database will be stored in the file <code>mpfs.db</code> in the current directory. The <code>since-slot</code> and <code>since-block-id</code> parameters are used to specify the starting point for the service to track events.</p>
<blockquote>
<p>Be careful to start indexing before the token you are going to use was created. If you are creating a new token, just start from nowish.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">â€‹</a></h2>
<ul>
<li><a href="https://mpfs.plutimus.com/api-docs" target="_blank" rel="noopener noreferrer">Signingless API Reference</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/cardano-foundation/mpfs/tree/main/docs/docs/intro.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--next" href="/mpfs/docs/architecture"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">System architecture</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#merkle-patricia-forestry" class="table-of-contents__link toc-highlight">Merkle Patricia Forestry</a><ul><li><a href="#design-choices-to-run-mpf-on-cardano" class="table-of-contents__link toc-highlight">Design choices to run MPF on Cardano</a></li></ul></li><li><a href="#mpfs-the-service" class="table-of-contents__link toc-highlight">MPFS: the service</a></li><li><a href="#pre-requisites" class="table-of-contents__link toc-highlight">Pre-requisites</a></li><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting started</a><ul><li><a href="#docker" class="table-of-contents__link toc-highlight">Docker</a></li><li><a href="#source" class="table-of-contents__link toc-highlight">Source</a></li></ul></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mpfs/docs/intro">Getting Started</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Cardano Foundation, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>